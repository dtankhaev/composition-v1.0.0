# yamdb_final
![yamdb_workflow](https://github.com/dtankhaev/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

REST API проект для сервиса YaMDb — сбор отзывов о фильмах, книгах или музыке.

## Описание

Проект YaMDb собирает отзывы пользователей на произведения.
Произведения делятся на категории: «Книги», «Фильмы», «Музыка».
Список категорий может быть расширен (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).

### Как запустить проект:

Все описанное ниже относится к ОС Linux.
Клонируем репозиторий и переходим в него:

```bash
git clone git@github.com:dtankhaev/yamdb_final.git
```

Переходим в папку с файлом docker-compose.yaml:

```bash
cd infra
```

Поднимаем контейнеры (infra_db_1, infra_web_1, infra_nginx_1):

```bash
docker-compose up -d --build
```

Выполняем миграции:

```bash
docker-compose exec web python manage.py migrate
```

Создаем суперпользователя:

```bash
docker-compose exec web python manage.py createsuperuser
```

Србираем статику:

```bash
docker-compose exec web python manage.py collectstatic --no-input
```

Останавливаем контейнеры:

```bash
docker-compose down -v
```

### Шаблон наполнения .env (не включен в текущий репозиторий) расположенный по пути infra/.env

```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
SECRET_KEY=key
```

### Документация API YaMDb

Документация доступна по эндпойнту: http://localhost/redoc/

### Пользовательские роли

- **Аноним** — может просматривать описания произведений, читать отзывы
  и комментарии.
- **Аутентифицированный пользователь (user)** — может читать всё, как и Аноним,
  может публиковать отзывы и ставить оценки произведениям, может комментировать
  отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать
  свои оценки произведений. Эта роль присваивается по умолчанию каждому новому
  пользователю.
- **Модератор (moderator)** — те же права, что и у Аутентифицированного
  пользователя, плюс право удалять и редактировать любые отзывы и комментарии.
- **Администратор (admin)** — полные права на управление всем контентом
  проекта. Может создавать и удалять произведения, категории и жанры.
  Может назначать роли пользователям.
- **Суперюзер Django** должен всегда обладать правами администратора,
  пользователя с правами admin. Даже если изменить пользовательскую роль
  суперюзера — это не лишит его прав администратора. Суперюзер — всегда
  администратор, но администратор — не обязательно суперюзер.